# RabbitMQ部署

# 1.本機部署

使用Docker來安裝。

# 2.集群部署

接下来，我们看看如何安装RabbitMQ的集群。

## 2.1.集群分类

在RabbitMQ的官方doc中，兩種配置方式：

- 普通模式：普通模式集群不進行資料同步，每個MQ都有自己的queue、message（其他資料如switcher等會同步）。例如我們有2個MQ：mq1，和mq2，如果消息在mq1，而連接到了mq2，那麼mq2會去mq1找消息，然後返回。如果mq1當機，消息就會丢失。
- 鏡像模式：與普通模式不同，queue會在各個mq的鏡像節點間同步，因此連接到任何一個鏡像節點，都可取得message。而且如果一節點到機，並不會丟失資料。不過，這種方式增加了資料同步的消耗。


## 2.2.設置network

首先，需要讓3台MQ互相知道對方的存在。

分别在3台機器中，設置 /etc/hosts文件，添加如下内容：

```
192.168.150.101 mq1
192.168.150.102 mq2
192.168.150.103 mq3
```